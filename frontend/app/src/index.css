@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: light dark; }
body { @apply bg-gray-50 text-gray-900; }

/* Base anti-overflow (mobile-first) - prevents unintended horizontal scrolls */
html, body, #root { height: 100%; }
html, body { overflow-x: hidden; }
/* Ensure child elements cannot force parents to expand horizontally */
* { min-width: 0; }
img, canvas, svg, video { max-width: 100%; height: auto; }

/* Prevent elements from overflowing and ensure images scale */
* { box-sizing: border-box; }
img { max-width: 100%; height: auto; display: block; }

/* Ensure tables and long content don't force layout overflow */
table { width: 100%; }

/* Strong overrides to prevent dashboard card collapse on small screens */
.dashboard-grid {
	grid-auto-rows: minmax(88px, auto) !important;
}
.dashboard-card {
	height: 100% !important;
	display: flex !important;
	flex-direction: column !important;
	justify-content: space-between !important;
	overflow: hidden !important;
}

/* Fallback safety: ensure main content can shrink without overflowing sidebar */
main, #main-content {
	min-width: 0 !important;
}

/* Extra mobile overrides: force dashboard full-width and remove side padding/margins */
@media (max-width: 640px) {
	/* If grid layout is causing rendering issues on some devices, fall back to block stacking */
	.dashboard-grid {
		display: block !important;
		grid-template-columns: 1fr !important;
		gap: 0.75rem !important;
		width: 100% !important;
		max-width: 100% !important;
		transform: none !important;
		left: 0 !important;
	}
	.dashboard-card {
		display: block !important;
		width: 100% !important;
		height: auto !important;
		margin-left: 0 !important;
		margin-right: 0 !important;
		box-sizing: border-box !important;
		overflow: visible !important;
	}
	/* Remove the container max-width padding on very small screens to avoid clipping */
	.max-w-screen-xl {
		padding-left: 0 !important;
		padding-right: 0 !important;
		max-width: 100% !important;
	}
}

	/* Mobile safety: ensure main content sits above the sidebar and uses full viewport width
		 This is a targeted, minimal fix that prevents the main area from being clipped when the
		 sidebar uses transforms for show/hide. Keep this narrow and reversible. */
	@media (max-width: 640px) {
		main#main-content, main {
			position: relative !important;
			z-index: 40 !important; /* above aside which uses z-index 30 */
			transform: none !important;
			left: 0 !important;
			width: 100vw !important;
			max-width: 100vw !important;
			margin: 0 !important;
			padding: 0 !important; /* remove all padding on main in mobile */
			overflow-x: visible !important;
		}
		aside#sidebar {
			z-index: 30 !important;
			/* keep aside visible but below main so it doesn't clip the viewport */
		}
		/* Ensure the inner container uses full width without padding */
		.max-w-screen-xl {
			padding-left: 0 !important;
			padding-right: 0 !important;
			max-width: 100% !important;
		}
	}

	/* Emergency overrides: make sure root/main use the full viewport width and are not transformed or clipped */
	html, body, #root {
		width: 100vw !important;
		overflow-x: auto !important;
	}

	#main-content, main, .max-w-screen-xl {
		transform: none !important;
		left: 0 !important;
		right: 0 !important;
		position: relative !important;
		width: 100% !important;
		max-width: 100% !important;
		overflow-x: visible !important;
	}

