@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: light dark; }
body { @apply bg-gray-50 text-gray-900; }

/* Prevent elements from overflowing and ensure images scale */
* { box-sizing: border-box; }
img { max-width: 100%; height: auto; display: block; }

/* Ensure tables and long content don't force layout overflow */
table { width: 100%; }

/* Strong overrides to prevent dashboard card collapse on small screens */
.dashboard-grid {
	grid-auto-rows: minmax(88px, auto) !important;
}
.dashboard-card {
	height: 100% !important;
	display: flex !important;
	flex-direction: column !important;
	justify-content: space-between !important;
	overflow: hidden !important;
}

/* Fallback safety: ensure main content can shrink without overflowing sidebar */
main, #main-content {
	min-width: 0 !important;
}

/* Extra mobile overrides: force dashboard full-width and remove side padding/margins */
@media (max-width: 640px) {
	/* If grid layout is causing rendering issues on some devices, fall back to block stacking */
	.dashboard-grid {
		display: block !important;
		grid-template-columns: 1fr !important;
		gap: 0.75rem !important;
		width: 100% !important;
		max-width: 100% !important;
		transform: none !important;
		left: 0 !important;
	}
	.dashboard-card {
		display: block !important;
		width: 100% !important;
		height: auto !important;
		margin-left: 0 !important;
		margin-right: 0 !important;
		box-sizing: border-box !important;
		overflow: visible !important;
	}
	/* Remove the container max-width padding on very small screens to avoid clipping */
	.max-w-screen-xl {
		padding-left: 0 !important;
		padding-right: 0 !important;
		max-width: 100% !important;
	}
}

	/* DEBUG helpers - temporary: outlines to visualize layout boxes on small screens */
	@media (max-width: 640px) {
		aside#sidebar { outline: 3px solid rgba(220, 38, 38, 0.9) !important; }
		main#main-content, main { outline: 3px solid rgba(37, 99, 235, 0.9) !important; }
		/* subtle background to help see bounds */
		main { background-color: rgba(255,255,0,0.02) !important; }
	}

	/* TEMPORARY: hide sidebar and force main to full width on small screens to unblock validation */
	@media (max-width: 640px) {
		aside#sidebar { display: none !important; visibility: hidden !important; }
		main#main-content, main {
			position: relative !important;
			left: 0 !important;
			transform: none !important;
			width: 100vw !important;
			max-width: 100vw !important;
			margin: 0 !important;
			padding-left: 0 !important;
			padding-right: 0 !important;
			overflow: visible !important;
		}
		/* hide debug overlays */
		.dbg-box, #dbg-overlay { display: none !important; }
	}

	/* Emergency overrides: make sure root/main use the full viewport width and are not transformed or clipped */
	html, body, #root {
		width: 100vw !important;
		overflow-x: auto !important;
	}

	#main-content, main, .max-w-screen-xl {
		transform: none !important;
		left: 0 !important;
		right: 0 !important;
		position: relative !important;
		width: 100% !important;
		max-width: 100% !important;
		overflow-x: visible !important;
	}

	/* Lower the sidebar z-index on small screens to ensure main content isn't clipped by overlaying elements */
	@media (max-width: 640px) {
		aside#sidebar { z-index: 10 !important; }
		main { z-index: 20 !important; }
	}

